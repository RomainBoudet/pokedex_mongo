<%- include('partials/header') %>

<h2 class="title_type text-center">Cliquez sur un type pour voir tous les pokemons de ce type</h2>

<div class="cardsContainer_type">

  <% for (const item of allType) { %>

  <div class="containertype">
    <a href="/type/<%=item.name%>" data-bs-toggle="tooltip" data-bs-placement="top" title="<%=item.total%> Pokemons" >
      <h2 class="buttontype1" class="rounded-left" style="background-color:#<%=item.color%>">
        <%=item.name%></h2>
    </a>
    <h2 class="buttontype2 dropdown-toggle" style="background-color:#<%=item.color%>"  id="dropdownMenuButton1" data-bs-toggle="dropdown">
      </h2>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
        <% for (const pokemon of item.list) { %>
          <li><a class="dropdown-item" href="/pokemon/<%=pokemon.id%>"><%=pokemon.name%></a></li>
          <% } %>

      </ul>
  </div>

  <% } %>


</div>



<% if (locals.toastMessage) {%>

<div class="position-fixed bottom-0 end-0 p-3 text-white" style="z-index: 11">
  <div id="typeListToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-primary text-white">
      <img src="/img/pikachu.gif" class="rounded me-2" alt="Pikatchu picture" style="width: 55px; height: 55px;">
      <strong class="me-auto">Pokedex</strong>
      <small id="date"><%= toastDate %></small>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body bg-primary"><%= toastMessage %></div>
  </div>
</div>

<%  } else { %>

<% } %>


<% if (locals.toastMessage) {%>

<script type="text/javascript" nonce="<%=locals.nonce%>" crossorigin="anonymous">
  var toastElList = [].slice.call(document.querySelectorAll('.toast'))
  var toastList = toastElList.map(function (toastEl) {
    // Creates an array of toasts (it only initializes them)
    return new bootstrap.Toast(toastEl) // No need for options; use the default options
  });


  toastList.forEach(toast => toast.show()); // This show them
</script>

<%  } else { %>

<% } %>


<%- include('partials/footer') %>